import{v as u}from"./VueMxGraphLoader-BvcjzJG_.js";import{d as E,r as g,y as S,D as V,l as k,o as T,e as G,z as x,v as d,b as m,F as L,h as c,_ as M}from"./index-CCRf4Tvv.js";import"./_commonjsHelpers-Cpj98o6Y.js";const z={class:"border-b p-3 gap-3 flex items-center"},F=E({__name:"mxGraphLabel",setup(N){const o=g(),s=g(),{mxClient:b,mxUtils:f,mxRubberband:y,mxCodec:_,mxConstants:p}=u,a=S("containerRef"),h=n=>{if(!b.isBrowserSupported()){f.error("浏览器不支持",200,!1);return}const t=new u.mxGraphModel,e=new u.mxGraph(n,t);o.value=e,s.value=t,C(),new y(e),e.setEnabled(!0),e.setTooltips(!0),e.centerZoom=!0,e.resizeContainer=!1;const r=e.getDefaultParent();e.getModel().beginUpdate();try{const i=e.insertVertex(r,null,"开始我是一个很长很长很长很长很长很长很长很长的名字",200,20,80,30,"start;fontStyle=7;"),l=e.insertVertex(r,null,"结束",200,400,80,30,"end");e.insertEdge(r,null,"我是一个很长很长很长很长很长很长很长很长的名字",i,l)}finally{e.getModel().endUpdate()}},C=()=>{o.value.htmlLabels=!0,o.value.isWrapping=n=>n.isVertex(),o.value.isCellEditable=n=>n.isEdge(),o.value.getLabel=n=>{const t=o.value.convertValueToString(n),e=s.value.getGeometry(n);if(n.isEdge())return t.substring(0,6)+"...";if(!s.value.isCollapsed(n)&&e!=null&&(e.offset==null||e.offset.x==0&&e.offset.y==0)&&s.value.isVertex(n)&&e.width>=2){const i=o.value.getStylesheet().getDefaultVertexStyle()[p.STYLE_FONTSIZE]||p.DEFAULT_FONTSIZE,l=e.width/(i*.6);return t.length>l?t.substring(0,l-6)+"...":t}}},v=n=>{n==="large"?o.value.zoomIn():o.value.zoomOut()},w=()=>{const t=new _().encode(o.value.getModel()),e=f.getXml(t);console.log(e)};return V(()=>{if(a.value==null)return;const n=a.value;h(n)}),(n,t)=>{const e=k("t-link");return T(),G(L,null,[x("div",z,[d(e,{theme:"primary",hover:"color",onClick:w},{default:m(()=>t[2]||(t[2]=[c("查看xml")])),_:1}),d(e,{theme:"primary",hover:"color",onClick:t[0]||(t[0]=r=>v("large"))},{default:m(()=>t[3]||(t[3]=[c("放大")])),_:1}),d(e,{theme:"primary",hover:"color",onClick:t[1]||(t[1]=r=>v("Small"))},{default:m(()=>t[4]||(t[4]=[c("缩小")])),_:1})]),x("div",{ref_key:"containerRef",ref:a,class:"graph_container"},null,512)],64)}}}),I=M(F,[["__scopeId","data-v-85ea2fe2"]]);export{I as default};
